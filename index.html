
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">

	<script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
	<script src="admin.html"></script>
	<script src="user.html"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    <link rel="stylesheet" href="view.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script>
	    $(document).bind('mobileinit',function(){
	        $.mobile.changePage.defaults.changeHash = false;
	        $.mobile.hashListeningEnabled = false;
	        $.mobile.pushStateEnabled = false;
	    });
	</script> 
	<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	

</head>
<body>
	<div data-role="page" id="page1" >
	    <div data-role="header" id="header">
	         <h1 id="header_text_id">Strona logowania do platformy u-DUŚ</h1>
	    </div>
	    <center>
	    <div data-role="content" id="content1">
		    
		    	<label id="login_label_id">Login:</label>
				<div data-role="fieldcontain">
			    <input type="text" name="login" id="login_id" value=""  />
				</div>

				<label id="pass_label_id" for="password">Hasło:</label>	
				<div data-role="fieldcontain">
			    	<input type="password" name="password" id="password_id" value=""  />
				</div>	
				<div data-role="fieldcontain" id="flip_switch_div_id">
					<label for="flip-3" id="flip3_label_id">Pokaż hasło:</label>
					<select name="flip_switch" id="flip_switch_id" data-role="slider" data-theme="b">
						<option value="Nie">Nie</option>
						<option value="Tak">Tak</option>
					</select> 
				</div>
				<a href="#" id="button1" class="ui-btn">Zaloguj</a>
				<script type="text/javascript">
					$( document ).ready(function() {
						$('#button1').on('click',function(){
				  			var login = $('#login_id').val();
				  			$.ajax({ 
				  			  type:"POST",                                     
						      url: 'singing_in.php',                  //the script to call to get data          
						      data: {login},
						                              //you can insert url argumnets here to pass to api.php
						                                       //for example "id=5&parent=6"
						      dataType: 'json',                //data format      
						      success: function(data)          //on recieve of reply
						      {
						      	//alert(data[0][0]);
						      	var pass = data[0][0];
						      	var perm = data[0][1];
						      	if($('#password_id').val()==pass)
						      	{
						      		if(perm=="admin")
						      		{
						      			$.mobile.changePage( $("#page2"), "slide", true, true);
						      		}
						      		if(perm=="user")
						      		{
						      			$.mobile.changePage($('#page3'),"slide",true,true);
						      		}
						      	}
						        
						      } 
						    });



				  			/*if($.trim(login) != '') //trim usuwa spacje
				  			{
				  				$.post('user_name.php',{login : login},function(data){
				  						alert(data[0]);
				  						if($("#password_id").val()==data)
				  						{
				  							$.mobile.changePage( $("#page2"), "slide", true, true);
				  						}
				  						//w tym miejscu następuje rurchomienie pliku name.php i przekazanie mu zmiennej która nazywać się będzie name a wartość jej to będzie to co siedzi w zmienej tymczasowej name stworzonej wcześniej. to co zostanie zwrócone to data,które jest argumentem funkcji
				  				});
				  			}*/
				  		});
					    $( "#flip_switch_id" ).on( 'slidestop', function() {
					    	
					    	if($("#flip_switch_id").val()=="Tak")
					    	{
					    		$('#password_id').attr('type', 'text');
					    		

					    	}
					    	else
					    	{
					    		$("#password_id").prop("type","password");
					    		
					    	}
					    });
					$("#flip_switch_div_id").hide();
					$("#button1").prop("disabled",true);
					$("#button1").prop("disabled",false);
					$("#password_id").bind("tap",function (){
						$("#flip_switch_div_id").show(500);
					});
					$("#login_id").bind("tap",function(){
						$("#flip_switch_div_id").hide(500);
					});
					});
					
					
				</script>
			
	    </div>
	    </center>
	    <center>
	    	<div id="footer" data-role="footer" style="width:300px">
	        Autorzy:Anna Gawor, Dominik Pawlik
	   		</div>
	    </center>
	</div>

	<div data-role="page" id="page2">
	   	<div data-role="header" id="header">
		    <h1 id="header_text_id">Panel Administracyjny</h1>
		</div> 	
		<div data-role="content" id="content2">
		<img id="admin_img" src="admin.png" alt="Admin Panel">
		   	
		   	<script type="text/javascript">
		  		
		  	</script>
		</div>	
	   	<div id="footer" data-role="footer" data-theme="b" data-iconpos="top" data-id="foo1" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a data-icon="alert" href="#page1">Wyloguj</a></li>
					
				</ul>
			</div><!-- /navbar -->
		</div><!-- /footer -->
	</div>  

	<div data-role="page" id="page3">
	   	<div data-role="header" id="header">
		    <h1 id="header_text_id">Panel użytkownika</h1>
		</div> 	
		<div data-role="content" id="content2">
		    <label for="base-text">Wyszukiwanie w bazie:</label>
	    	<input type="text" name="name" id="base-text" value=""  />
		  		<input type="submit" id="name-submit" value="Grab">
		  		<div id="name-data"></div>
		  		<script type="text/javascript">
		  		$('#name-submit').on('click',function(){
		  			var login = $('#base-text').val();
		  			if($.trim(login) != '') //trim usuwa spacje
		  			{
		  				$.post('user_name.php',{login : login},function(data){
		  						$("#name-data").text(data);//w tym miejscu następuje rurchomienie pliku name.php i przekazanie mu zmiennej która nazywać się będzie name a wartość jej to będzie to co siedzi w zmienej tymczasowej name stworzonej wcześniej. to co zostanie zwrócone to data,które jest argumentem funkcji
		  				});
		  			}
		  		});
		  		</script>
		</div>
	    <div id="footer" data-role="footer" data-theme="b" data-iconpos="top" data-id="foo1" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a data-icon="alert" href="#page1">Wyloguj</a></li>
					
				</ul>
			</div><!-- /navbar -->
		</div><!-- /footer --> 
	</div>

</body>
</html>
